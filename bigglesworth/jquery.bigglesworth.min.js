/*! Mr. Bigglesworth v0.1.0 | Apache License, Version 2.0 | https://github.com/mhulse/bigglesworth */!function(a,b){"use strict";var c=b.console||{log:a.noop,warn:a.noop},d="bigglesworth",e={results:"#"+d+"_results",resultsTemplate:'<p><a href="{ href }">{ title }</a></p>',resultsNo:"#"+d+"_results-no",resultsNoTemplate:"<p>Oh shucks, nothing found :(</p>",feed:"search.json",limit:5,buffer:300,onInit:a.noop,onAfterInit:a.noop,onBeforeAdd:a.noop,onAdd:a.noop,onBeforeRemove:a.noop,onRemove:a.noop},f={init:function(b){return this.each(function(){var f,h=a(this),i=h.data(d);i||(f=a.extend(!0,{},e,b,h.data(d+"Options")),h.data(d,{init:!1,settings:f,target:h,results:a(f.results),resultsNo:a(f.resultsNo),matches:[],json:null}),i=h.data(d)),i.init?c.warn("jQuery."+d,"thinks it's already initialized on",this):g(i)})},destroy:function(){return this.each(function(){var b=a(this),c=b.data(d);c&&b.removeData(d)})}},g=function(b){b.init=!0,b.settings.onInit.call(b.target),b.results.length&&b.resultsNo.length?b.target.one("focus",function(){a.getJSON(b.settings.feed,function(a){b.json=a,h(b)}).fail(function(a,e,f){c.log('jQuery.%s thinks the JSON request failed for %o because: "%s, %s".',d,b.target,e,f)})}).closest("form").submit(function(a){a.preventDefault()}):c.warn('jQuery.%s can\'t find either a "results" (%o) or "resultsNo" (%o) elements for %o.',d,b.results,b.resultsNo,b.target),b.settings.onAfterInit.call(b.target)},h=function(c){var d;c.target.on("keyup",function(e){var f=a.trim(a(this).val());clearInterval(d),d=setTimeout(function(){13===e.which&&c.matches.length&&(b.location=c.matches[0].href),f.length?j(c,i(c,f)):l(c)},c.settings.buffer)})},i=function(a,b){var c,d,e;for(a.matches=[],d=0,e=a.json.length;e>d;d++)c=a.json[d],k(c,b)&&a.matches.push(c);return a.matches},j=function(b,c){var e,f;if(l(b),c&&c.length)for(e=0,f=c.length;f>e&&e<b.settings.limit;e++)a.fn[d].format(b,c[e]);else a.fn[d].zilch(b)},k=function(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)){if("string"==typeof a[c]&&-1!=a[c].toLowerCase().indexOf(b.toLowerCase())){d=!0;break}if(null!==a[c]&&"object"==typeof a[c]&&(d=k(a[c],b)))break}return d},l=function(a){a.matches=[],a.results.children().remove(),a.resultsNo.children().remove()};a.fn[d]=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("jQuery."+d+" thinks that "+b+" doesn't exist"):f.init.apply(this,arguments)},a.fn[d].format=function(b,c){var d=b.settings.resultsTemplate.replace(/\{(.*?)\}/g,function(b,d){return c[a.trim(d)]});b.results.append(d)},a.fn[d].zilch=function(a){a.resultsNo.append(a.settings.resultsNoTemplate)}}(jQuery,window,document);