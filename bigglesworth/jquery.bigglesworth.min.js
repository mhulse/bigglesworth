/*! Mr. Bigglesworth v0.1.0 | Apache License, Version 2.0 | https://github.com/mhulse/bigglesworth */!function(a,b){"use strict";var c=b.console||{log:a.noop,warn:a.noop},d="bigglesworth",e={results:"#"+d+"_results",resultsTemplate:'<p><a href="{ href }">{ title }</a></p>',resultsNo:"#"+d+"_results-no",resultsNoTemplate:"<p>Nothing recent found.</p>",feed:"search.json",limit:5,buffer:300,onInit:a.noop,onAfterInit:a.noop,onResult:a.noop,onRemove:a.noop,onZilch:a.noop},f={init:function(b){return this.each(function(){var f,h=a(this),i=h.data(d);i||(f=a.extend(!0,{},e,b,h.data(d+"Options")),h.data(d,{init:!1,settings:f,target:h,form:h.closest("form"),results:a(f.results),resultsNo:a(f.resultsNo),matches:[],query:"",json:null}),i=h.data(d)),i.init?c.warn("jQuery.%s thinks it's already initialized on %o.",d,this):g(i)})},destroy:function(){return this.each(function(){var b=a(this),c=b.data(d);c&&b.removeData(d).off("focus."+d).off("keyup."+d).closest("form").off("submit."+d)})}},g=function(b){b.init=!0,b.settings.onInit.call(b.target,b),b.results.length&&b.resultsNo.length?(b.target.one("focus."+d,function(){a.getJSON(b.settings.feed,function(a){b.json=a,h(b)}).fail(function(a,e,f){c.log('jQuery.%s thinks the JSON request failed for %o because: "%s, %s".',d,b.target,e,f)})}),b.form.on("submit."+d,function(a){a.preventDefault()})):c.warn('jQuery.%s can\'t find either a "results" (%o) or "resultsNo" (%o) elements for %o.',d,b.results,b.resultsNo,b.target),b.settings.onAfterInit.call(b.target,b)},h=function(c){var e;c.target.on("keyup."+d,function(f){c.query=a.trim(a(this).val()),clearInterval(e),e=setTimeout(function(){13===f.which&&(c.matches.length?b.location=c.matches[0].href:c.form[0].submit()),c.query.length?j(c,i(c)):(c.matches=[],a.fn[d].nuke(c))},c.settings.buffer)})},i=function(a){var b,c,d;for(a.matches=[],c=0,d=a.json.length;d>c;c++)b=a.json[c],k(b,a.query)&&a.matches.push(b);return a.matches},j=function(b,c){var e,f;if(a.fn[d].nuke(b),c&&c.length)for(e=0,f=c.length;f>e&&e<b.settings.limit;e++)a.fn[d].format(b,c[e]);else a.fn[d].zilch(b)},k=function(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)){if("string"==typeof a[c]&&-1!=a[c].toLowerCase().indexOf(b.toLowerCase())){d=!0;break}if(null!==a[c]&&"object"==typeof a[c]&&(d=k(a[c],b)))break}return d};a.fn[d]=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("jQuery.%s thinks that %s doesn't exist",d,b):f.init.apply(this,arguments)},a.fn[d].format=function(b,c){var d=b.settings.resultsTemplate.replace(/\{(.*?)\}/g,function(b,d){return c[a.trim(d)]});b.settings.onResult.call(b.target,c,d,b),b.results.append(d)},a.fn[d].zilch=function(a){a.settings.onZilch.call(a.target,a),a.resultsNo.append(a.settings.resultsNoTemplate)},a.fn[d].nuke=function(b){a.each([b.results,b.resultsNo],function(){var c=a(this),d=c.children();d.length&&(b.settings.onRemove.call(b.target,c,d,b),d.remove())})}}(jQuery,window);