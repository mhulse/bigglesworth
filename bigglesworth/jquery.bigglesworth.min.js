/*! Mr. Bigglesworth v1.1.0 | Apache License, Version 2.0 | https://github.com/mhulse/jquery-bigglesworth */!function(a,b){"use strict";var c=b.console||{log:a.noop,warn:a.noop},d="bigglesworth",e={result:"#"+d+"_results",resultTemplate:'<p><a href="{ uri }">{ title }</a></p>',resultNo:"#"+d+"_results-no",resultNoTemplate:"<p>Nothing recent found.</p>",classOn:d+"_on",classOff:d+"_off",feed:"search.json",limit:5,buffer:300,onInit:a.noop,onAfterInit:a.noop,onResult:a.noop,onRemove:a.noop,onZilch:a.noop},f={init:function(b){return this.each(function(){var f,h=a(this),i=h.data(d);i||(f=a.extend(!0,{},e,b,h.data(d+"Options")),h.data(d,{init:!1,settings:f,target:h,form:h.closest("form"),result:a(f.result),resultNo:a(f.resultNo),matches:[],query:"",json:null}),i=h.data(d)),i.init?c.warn("jQuery.%s thinks it's already initialized on %o.",d,this):g(i)})},destroy:function(){return this.each(function(){var b=a(this).data(d);b&&(b.target.removeData(d).removeClass(b.settings.classOff).removeClass(b.settings.classOn).off("focus."+d).off("keyup."+d).closest("form").off("submit."+d),b.result.add(b.resultNo).removeClass(b.settings.classOn).removeClass(b.settings.classOff))})}},g=function(b){b.init=!0,b.settings.onInit.call(b.target,b),b.result.length&&b.resultNo.length?(b.result.add(b.resultNo).addClass(b.settings.classOff),b.target.one("focus."+d,function(){a.getJSON(b.settings.feed,function(a){b.json=a,h(b)}).fail(function(a,e,f){c.log('jQuery.%s thinks the JSON request failed for %o because: "%s, %s".',d,b.target,e,f)})}),b.form.on("submit."+d,function(a){a.preventDefault()})):c.warn('jQuery.%s can\'t find either a "results" (%o) or "resultsNo" (%o) elements for %o.',d,b.result,b.resultNo,b.target),b.settings.onAfterInit.call(b.target,b)},h=function(c){var e;c.target.on("keyup."+d,function(f){c.query=a.trim(a(this).val()),clearInterval(e),e=setTimeout(function(){13===f.which&&(c.matches.length?b.location=c.matches[0].uri:c.form[0].submit()),c.query.length?j(c,i(c)):(c.result.add(c.resultNo).removeClass(c.settings.classOn).addClass(c.settings.classOff),c.matches=[],a.fn[d].nuke(c))},c.settings.buffer)})},i=function(a){var b,c,d;for(a.matches=[],c=0,d=a.json.length;d>c;c++)b=a.json[c],k(b,a.query)&&a.matches.push(b);return a.matches},j=function(b,c){var e,f;if(a.fn[d].nuke(b),c&&c.length){for(e=0,f=c.length;f>e&&e<b.settings.limit;e++)a.fn[d].format(b,c[e]);b.result.removeClass(b.settings.classOff).addClass(b.settings.classOn),b.resultNo.removeClass(b.settings.classOn).addClass(b.settings.classOff)}else a.fn[d].zilch(b),b.result.removeClass(b.settings.classOn).addClass(b.settings.classOff),b.resultNo.removeClass(b.settings.classOff).addClass(b.settings.classOn)},k=function(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)){if("string"==typeof a[c]&&-1!=a[c].toLowerCase().indexOf(b.toLowerCase())){d=!0;break}if(null!==a[c]&&"object"==typeof a[c]&&(d=k(a[c],b)))break}return d};a.fn[d]=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("jQuery.%s thinks that %s doesn't exist",d,b):f.init.apply(this,arguments)},a.fn[d].format=function(b,c){var d=b.settings.resultTemplate.replace(/\{(.*?)\}/g,function(b,d){return c[a.trim(d)]});b.settings.onResult.call(b.target,c,d,b),b.result.append(d)},a.fn[d].zilch=function(a){a.settings.onZilch.call(a.target,a),a.resultNo.append(a.settings.resultNoTemplate)},a.fn[d].nuke=function(b){a.each([b.result,b.resultNo],function(){var c=a(this),d=c.children();d.length&&(b.settings.onRemove.call(b.target,c,d,b),d.remove())})}}(jQuery,window);